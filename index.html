<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/style.css">
        <title>ATE</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="spis.js"></script>
    </head>
    <body>
        <section id="wraper">
            <div>
                <center>
                    <input class="button" type="button" value="Losuj" onclick="wypelnij()">
                    <input class="button" type="button" value="Sprawdź" onclick="sprawdz()">
                    <input class="button" type="button" value="Uzupełnij" onclick="uzupelnij()">
                </center>
                <div class="divTable">
                    <div class="divTableBody">
                        <div class="divTableRow">
                            <div class="divTableCell">Autor</div>
                            <div class="divTableCell">Tytuł</div>
                            <div class="divTableCell">Epoka</div>
                        </div>
                        <div class="divTableRow">
                            <div class="divTableCell" id="A1"><input type="text" id="A1Text" hidden>&nbsp;</div>
                            <div class="divTableCell" id="T1">&nbsp;</div>
                            <div class="divTableCell" id="E1"><input type="text" id="E1Text" hidden>&nbsp;</div>
                        </div>
                        <div class="divTableRow">
                            <div class="divTableCell" id="A2"><input type="text" id="A2Text" hidden>&nbsp;</div>
                            <div class="divTableCell" id="T2">&nbsp;</div>
                            <div class="divTableCell" id="E2"><input type="text" id="E2Text" hidden>&nbsp;</div>
                        </div>
                        <div class="divTableRow">
                            <div class="divTableCell" id="A3"><input type="text" id="A3Text" hidden>&nbsp;</div>
                            <div class="divTableCell" id="T3">&nbsp;</div>
                            <div class="divTableCell" id="E3"><input type="text" id="E3Text" hidden>&nbsp;</div>
                        </div>
                        <div class="divTableRow">
                            <div class="divTableCell" id="A4"><input type="text" id="A4Text" hidden>&nbsp;</div>
                            <div class="divTableCell" id="T4">&nbsp;</div>
                            <div class="divTableCell" id="E4"><input type="text" id="E4Text" hidden>&nbsp;</div>
                        </div>
                        <div class="divTableRow">
                            <div class="divTableCell" id="A5"><input type="text" id="A5Text" hidden>&nbsp;</div>
                            <div class="divTableCell" id="T5">&nbsp;</div>
                            <div class="divTableCell" id="E5"><input type="text" id="E5Text" hidden>&nbsp;</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <footer>
            <hr class="stopka">
            <center>
            <p style="font-family: 'Playfair Display', serif">© Marcin Nowak 2020</p>
            </center>
        </footer>
    </body>
    <script>
        let requestURL = 'https://marci-n-owak.github.io/ATE/spis.json';
        let spisLektur;
        let liczbaLektur;

        fetch(requestURL)
            .then(response => response.json())
            .then(data => spisLektur = data)
            .then(data => liczbaLektur = Object.keys(data).length)
            .catch(error => console.log(error))
        
        let pytanie1;
        let pytanie2;
        let pytanie3;
        let pytanie4;
        let pytanie5;

        const wypelnij = () => {
            let numer = [];
            while(numer.length < 5){
                let r = Math.floor(Math.random() * liczbaLektur) + 1;
                if(numer.indexOf(r) === -1) numer.push(r);
            }

            pytanie1 = spisLektur["lektura" + numer[0]];
            pytanie2 = spisLektur["lektura" + numer[1]];
            pytanie3 = spisLektur["lektura" + numer[2]];
            pytanie4 = spisLektur["lektura" + numer[3]];
            pytanie5 = spisLektur["lektura" + numer[4]];

            document.getElementById("T1").innerHTML = pytanie1[1];
            document.getElementById("T2").innerHTML = pytanie2[1];
            document.getElementById("T3").innerHTML = pytanie3[1];
            document.getElementById("T4").innerHTML = pytanie4[1];
            document.getElementById("T5").innerHTML = pytanie5[1];

            document.getElementById("A1Text").hidden = false;
            document.getElementById("E1Text").hidden = false;
            document.getElementById("A2Text").hidden = false;
            document.getElementById("E2Text").hidden = false;       
            document.getElementById("A3Text").hidden = false;
            document.getElementById("E3Text").hidden = false;   
            document.getElementById("A4Text").hidden = false;
            document.getElementById("E4Text").hidden = false; 
            document.getElementById("A5Text").hidden = false;
            document.getElementById("E5Text").hidden = false; 

            document.getElementById("A1").style.backgroundColor = "white";
            document.getElementById("E1").style.backgroundColor = "white";
            document.getElementById("A2").style.backgroundColor = "white";
            document.getElementById("E2").style.backgroundColor = "white";
            document.getElementById("A3").style.backgroundColor = "white";
            document.getElementById("E3").style.backgroundColor = "white";
            document.getElementById("A4").style.backgroundColor = "white";
            document.getElementById("E4").style.backgroundColor = "white";
            document.getElementById("A5").style.backgroundColor = "white";
            document.getElementById("E5").style.backgroundColor = "white";

            document.getElementById("A1Text").value = "";
            document.getElementById("A2Text").value = "";
            document.getElementById("A3Text").value = "";
            document.getElementById("A4Text").value = "";
            document.getElementById("A5Text").value = "";
            document.getElementById("E1Text").value = "";
            document.getElementById("E2Text").value = "";
            document.getElementById("E3Text").value = "";
            document.getElementById("E4Text").value = "";
            document.getElementById("E5Text").value = "";
        }

        const sprawdz = () => {
            if(document.getElementById("A1Text").value.toLowerCase() == pytanie1[0].toLowerCase()){
            document.getElementById("A1").style.backgroundColor = "green";
            }
            else{
                document.getElementById("A1").style.backgroundColor = "red";
            }
            if(document.getElementById("E1Text").value.toLowerCase() == pytanie1[2].toLowerCase()){
                document.getElementById("E1").style.backgroundColor = "green";
            }
            else{
                document.getElementById("E1").style.backgroundColor = "red";
            }

            if(document.getElementById("A2Text").value.toLowerCase() == pytanie2[0].toLowerCase()){
                document.getElementById("A2").style.backgroundColor = "green";
            }
            else{
                document.getElementById("A2").style.backgroundColor = "red";
            }
            if(document.getElementById("E2Text").value.toLowerCase() == pytanie2[2].toLowerCase()){
                document.getElementById("E2").style.backgroundColor = "green";
            }
            else{
                document.getElementById("E2").style.backgroundColor = "red";
            }

            if(document.getElementById("A3Text").value.toLowerCase() == pytanie3[0].toLowerCase()){
                document.getElementById("A3").style.backgroundColor = "green";
            }
            else{
                document.getElementById("A3").style.backgroundColor = "red";
            }
            if(document.getElementById("E3Text").value.toLowerCase() == pytanie3[2].toLowerCase()){
                document.getElementById("E3").style.backgroundColor = "green";
            }
            else{
                document.getElementById("E3").style.backgroundColor = "red";
            }

            if(document.getElementById("A4Text").value.toLowerCase() == pytanie4[0].toLowerCase()){
                document.getElementById("A4").style.backgroundColor = "green";
            }
            else{
                document.getElementById("A4").style.backgroundColor = "red";
            }
            if(document.getElementById("E4Text").value.toLowerCase() == pytanie4[2].toLowerCase()){
                document.getElementById("E4").style.backgroundColor = "green";
            }
            else{
                document.getElementById("E4").style.backgroundColor = "red";
            }

            if(document.getElementById("A5Text").value.toLowerCase() == pytanie5[0].toLowerCase()){
                document.getElementById("A5").style.backgroundColor = "green";
            }
            else{
                document.getElementById("A5").style.backgroundColor = "red";
            }
            if(document.getElementById("E5Text").value.toLowerCase() == pytanie5[2].toLowerCase()){
                document.getElementById("E5").style.backgroundColor = "green";
            }
            else{
                document.getElementById("E5").style.backgroundColor = "red";
            }
        }
        const uzupelnij = () =>{
            document.getElementById("A1Text").value = pytanie1[0];
            document.getElementById("A2Text").value = pytanie2[0];
            document.getElementById("A3Text").value = pytanie3[0];
            document.getElementById("A4Text").value = pytanie4[0];
            document.getElementById("A5Text").value = pytanie5[0];
            
            document.getElementById("E1Text").value = pytanie1[2];
            document.getElementById("E2Text").value = pytanie2[2];
            document.getElementById("E3Text").value = pytanie3[2];
            document.getElementById("E4Text").value = pytanie4[2];
            document.getElementById("E5Text").value = pytanie5[2];
        }
    </script>
</html>